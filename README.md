# Congestion Control Test Framework - Version 1
This is the first version of the Test Framework, designed to test the functionality of the slow start algorithm using a mock implementation. The framework processes input data from a CSV file and runs the test on the data and exports the outputs in a text file.

![Test Framework](framework_image.png)


# ðŸ“¦ Repository Structure: `test_framework`

This framework supports testing and comparing congestion control algorithms like HyStart, BBR, and SEARCH variants. It provides automation for modifying, compiling, and evaluating TCP behavior under various configurations.

---

## ðŸ”¹ `framework/` â€“ Test Framework for Linux-based Simulations

Organized to automate testing with different TCP source files and alpha tuning values.

- `bin/`: Contains core automation scripts (detailed below).
- `support/`: Helper utilities and configuration files.
- `original cc files with labels/`: Stores original congestion control source files that are labeled for each CC test (BBR, HyStart, SEARCH)
- `change_alpha_test.py`:  
  Automates compilation and testing for multiple `search_alpha` values.
  - Edits `search_module.c`
  - Rebuilds and runs test pipeline
  - Stores output in per-alpha folders

---

## ðŸ”¹ `freebsd_test_framework/` â€“ Test Framework for FreeBSD-based Simulations
Module focused on testing NewReno with SEARCH enhancements.

- `bin/`, `support/`: Same structure as `framework/`
- `cc_newreno_search.c`, `cc_newreno_search.h`: original cc files with labels
---

## ðŸ§ª Core Utility Scripts (`bin/`)

These Python scripts automate preparation, simulation execution, and source extraction.

---
### ðŸ“„ `ss_extract.py`

**Purpose**:  
Generates testable simulation modules from kernel congestion control source files.

**Functionality**:
- Parses the `.c` file to extract labeled parts:
  - TCP struct fields accessed (e.g., `tcp_sk(sk)->field`)
  - Relevant functions, macros, and code blocks

**Produces the following files for standalone testing**:
- `tcp.h`
- `<keyword>_module.c`
- `<keyword>_defs.h`
- `Makefile`

**Usage**:
```bash
python3 ss_extract.py -f tcp_search.c -k SEARCH
```

### ðŸ“„ `ss_setup.py`
**Purpose**:  
Prepares the test environment by copying support and test files into `test_dir/`.

**Functionality**:
- Copies `cc_helper_function.h` and `test_<keyword>.c` into `test_dir/`
- Falls back to using `test_base.c` if `test_<keyword>.c` does not exist

**Usage**:
```bash
python3 ss_setup.py -k SEARCH
```

### ðŸ“„ Make file
Purpose:
Compiles the test simulation files generated by ss_extract.py.

**Usage**:
```bash
cd test_dir
make
```

### ðŸ“„ `ss_run.py`

**Purpose**:  
Runs the compiled test binary (`test_<keyword>`) on all `.csv` trace files in the input folder.

**Functionality**:
- Verifies that the binary `test_<keyword>` exists in `test_dir/`
- For each input `.csv` file:
  - Executes the test binary
  - Redirects the output to a `.txt` file in the output folder

**Usage**:
```bash
python3 ss_run.py -k SEARCH -i input_dir -o output_dir
```
