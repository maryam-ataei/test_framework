# Congestion Control Test Framework - Version 1
This is the first version of the Test Framework, designed to test the functionality of the slow start algorithm using a mock implementation. The framework processes input data from a CSV file and runs the test on the data and exports the outputs in a text file.

![Test Framework](framework_image.png)


# ðŸ“¦ Repository Structure: `test_framework`

This framework supports testing and comparing congestion control algorithms like HyStart, BBR, and SEARCH variants. It provides automation for modifying, compiling, and evaluating TCP behavior under various configurations.

---

## ðŸ”¹ `framework/` â€“ Test Framework for Linux-based Simulations

Organized to automate testing with different TCP source files and alpha tuning values.

- `bin/`: Contains core automation scripts (detailed below).
- `support/`: Helper utilities and test files. If the related CC test file does not exist, we can use test_base.c file to customize it for related CC test.
- `original cc files with labels/`: Stores original congestion control source files that are labeled for each CC test (BBR, HyStart, SEARCH)
- `change_alpha_test.py` -- just for SEARCH algorithm:  
  Automates compilation and testing for multiple `search_alpha` values.
  - Edits `search_module.c`
  - Rebuilds and runs test pipeline
  - Stores output in per-alpha folders

---

## ðŸ”¹ `freebsd_test_framework/` â€“ Test Framework for FreeBSD-based Simulations
Module focused on testing NewReno with SEARCH enhancements.

- `bin/`, `support/`: Same structure as `framework/`
- `cc_newreno_search.c`, `cc_newreno_search.h`: original cc files with labels
---

## ðŸ§ª Core Utility Scripts (`bin/`)

These Python scripts automate preparation, simulation execution, and source extraction.

---
### ðŸ“„ `ss_extract.py`

**Purpose**:  
Generates testable simulation modules from kernel congestion control source files.

**Functionality**:
- Parses the `.c` file to extract labeled parts:
  - TCP struct fields accessed (e.g., `tcp_sk(sk)->field`)
  - Relevant functions, macros, and code blocks

**Produces the following files for standalone testing**:
- `tcp.h`
- `<keyword>_module.c`
- `<keyword>_defs.h`
- `Makefile`

**Usage**:
```bash
python3 ss_extract.py -f tcp_search.c -k SEARCH
```

### ðŸ“„ `ss_setup.py`
**Purpose**:  
Prepares the test environment by copying support and test files into `test_dir/`.

**Functionality**:
- Copies `cc_helper_function.h` and `test_<keyword>.c` into `test_dir/`
- Falls back to using `test_base.c` if `test_<keyword>.c` does not exist

**Usage**:
```bash
python3 ss_setup.py -k SEARCH
```

### ðŸ“„ Make file
Purpose:
Compiles the test simulation files generated by ss_extract.py.

**Usage**:
```bash
cd test_dir
make
```

### ðŸ“„ `ss_run.py`

**Purpose**:  
Runs the compiled test binary (`test_<keyword>`) on all `.csv` trace files in the input folder.

**Functionality**:
- Verifies that the binary `test_<keyword>` exists in `test_dir/`
- For each input `.csv` file:
  - Executes the test binary
  - Redirects the output to a `.txt` file in the output folder


---

## ðŸ“Š Evaluation and Batch Testing Scripts

These scripts support visualization and automated batch testing of congestion control performance across different alpha values.

---

### ðŸ“„ `regressiontest_result_analysis.py`

**Purpose**:  
Analyzes and visualizes simulation outputs from BBR and SEARCH congestion control runs.

**Functionality**:
- Parses `.txt` log files generated by the framework
- Extracts metrics such as:
  - For BBR: `bbr_max_bw`, `bbr_full_bw`, `round_start`, `loss_happen`, `full_bw_cnt`
  - For SEARCH: `curr_delv`, `prev_delv`, `norm`, `exit_slow_start`
- Plots time-series graphs of:
  - Bandwidth over time
  - Normalized values and exit conditions
  - Packet loss and round boundaries
- Saves graphs in the `fig_ietf/` directory

**Usage**:
Set the mode in the script:
```python
BBR_RESULT = True            # For analyzing BBR logs
SEARCH_RESULT = True         # For analyzing SEARCH logs
PLOT_RESULT_TOGHETHER = True # Plot multiple metrics in one figure
ANALYSIS_NUMERICAL = True    # Enable numeric summary
```

### ðŸ“„ `SEARCH_overframework_alpha_test.py`

**Purpose**:  
Analyzes output log files generated from alpha-sensitivity experiments using the SEARCH congestion control test framework.

**Functionality**:
- Parses `.txt` logs and pcap-derived `.csv` files per alpha value
- Extracts and computes:
  - Exit time, loss timing, RTT, throughput, delivery rate
  - Missed bins, reset counts, power metrics
  - Success/failure of SEARCH exit behavior
- Generates plots per trace:
  - Delivery rate vs. time
  - RTT vs. time
  - CDFs for delivery rate, throughput, missed bins, etc.

**Use Case**:  
Post-analysis for SEARCH algorithm evaluation across different `search_alpha` values.

**Usage**:  
Update the `base_path`, `pcap_csv_path`, `log_csv_path`, and `fig_path` variables as needed, then run:
